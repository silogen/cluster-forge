# LARGE CLUSTER CONFIGURATION (Production: app-dev.silogen.ai)
# Actual Hardware: 4 nodes (1 GPU: 224 CPU/2TB RAM/8 GPUs, 3 CP: 16 CPU/96GB RAM each)
# Total Resources: 272 CPU cores, 2.2TB RAM, 8 AMD GPUs
# Storage: Longhorn (driver.longhorn.io) with multiple storage classes
# Classification: MEDIUM-LARGE hybrid (MEDIUM compute, LARGE storage capabilities)
#
# This configuration reflects the ACTUAL production deployment,
# which uses single replicas for most services (appropriate for 4-node cluster)
# and Longhorn storage with native RWX support.
#
# LARGE CLUSTER: All apps enabled (inherited from base values.yaml)  
# Uses Longhorn storage with native RWX support - no access mode mutation needed
# The kyverno-policies-storage-local-path app is NOT included in enabledApps

apps:
  # Core apps - ArgoCD (Production: single replicas, appropriate for 4-node cluster)
  argocd:
    valuesObject:
      # Production config: Single replicas (no HA for 4-node cluster)
      applicationSet:
        replicas: 1
      controller:
        replicas: 1
      redis:
        enabled: true
      redis-ha:
        enabled: false
      repoServer:
        replicas: 1
        autoscaling:
          enabled: false
      server:
        replicas: 1
        autoscaling:
          enabled: false

  # Storage - MinIO Tenant (Production: single server configuration)
  minio-tenant:
    valuesObject:
      tenant:
        pools:
          - name: pool-0
            servers: 1
            size: 500Gi
            storageClassName: direct
            volumesPerServer: 1

  # Secrets - OpenBao (Production: 3 replicas, 10Gi storage)
  openbao:
    valuesObject:
      server:
        ha:
          enabled: true
          replicas: 3
          raft:
            enabled: true

  # Workload scheduling - Kueue (Production: single replica)
  kueue:
    valuesObject:
      controllerManager:
        replicas: 1

  # Authentication - Keycloak (Production: single replica)
  keycloak:
    valuesObject:
      replicaCount: 1
      resources:
        limits:
          cpu: "500m"
          memory: "2Gi"
        requests:
          cpu: "250m"
          memory: "512Mi"

  # Monitoring - OTEL LGTM Stack (Production configuration)
  otel-lgtm-stack:
    valuesObject:
      # Production: Standard monitoring resources
      lgtm:
        storage:
          # Production storage sizes (default storage class)
          extra: 50Gi
          grafana: 10Gi
          loki: 50Gi
          mimir: 50Gi
          tempo: 50Gi
      collectors:
        resources:
          logs:
            limits:
              cpu: '1'
              memory: 2Gi
            requests:
              cpu: 200m
              memory: 400Mi
          metrics:
            limits:
              cpu: '2'
              memory: 8Gi
            requests:
              cpu: 500m
              memory: 1Gi

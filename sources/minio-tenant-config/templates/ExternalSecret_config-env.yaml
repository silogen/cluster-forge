---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: default-minio-tenant-env-configuration-spec
  namespace: minio-tenant-default
  annotations:
    argocd.argoproj.io/hook: PreSync
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: openbao-secret-store
  refreshInterval: 5m
  target:
    name: default-minio-tenant-env-configuration
    template:
      data:
        config.env: |
          export MINIO_SERVER_URL="http://minio:80"
          export MINIO_API_ROOT_ACCESS="on"
          export MINIO_ROOT_USER="minioroot"
          export MINIO_ROOT_PASSWORD="{{ "{{" }}.password{{ "}}"}}"
  data:
    - secretKey: password
      remoteRef:
        key: secrets/data/minio-root-password
        property: value

# Copyright Â© Advanced Micro Devices, Inc., or its affiliates.
#
# SPDX-License-Identifier: MIT

secretgenerator:
  image:
    repository: ghcr.io/silogen/cluster-tool
    tag: latest
    pullPolicy: IfNotPresent

kgateway:
  namespace: kgateway-system
  gatewayName: https
  airmapi:
    servicePort: 80
    prefixValue: airmapi
  airmui:
    servicePort: 80
    prefixValue: airmui
  keycloak:
    servicePort: 80
    prefixValue: kc

keycloak:
  prefixUrl: kc
  keycloakClientId: "354a0fa1-35ac-4a6d-9c4d-d661129c2cd0"
  namespace: keycloak
  serviceName: keycloak
  servicePort: 8080

airm:
  appDomain: PUBLIC-IP

  externalSecretStore:
    airm:
      name: openbao-secret-store
    minio:
      name: openbao-secret-store
    keycloak:
      name: openbao-secret-store

  postgresql:
    enabled: true
    cnpg:
      image: ghcr.io/cloudnative-pg/postgresql:17
      instance: 1
      resources:
        limits:
          cpu: "2"
          memory: 1Gi
        requests:
          cpu: "1"
          memory: 512Mi
      storage:
        size: 50Gi
        storageClass: default
      walStorage:
        size: 50Gi
        storageClass: default

  rabbitmqBackup:
    enabled: false
    image: ghcr.io/silogen/rabbitmq-backup:0.1
    replicas: 1
    resources:
      limits:
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    persistence:
      storage: 20Gi
      storageClassName: default
    cronJob:
      resources:
        limits:
          memory: 512Mi
        requests:
          cpu: 250m
          memory: 256Mi

  frontend:
    prefixUrl: airmui
    image:
      repository: ghcr.io/silogen/airm-ui
      tag: v2025.09-rc.6
      pullPolicy: IfNotPresent
    servicePort: 80
    replicase: 1
    resources:
      limits:
        memory: 4Gi
      requests:
        cpu: 500m
        memory: 4Gi

  configure:
    image:
      repository: ghcr.io/silogen/airm-configure
      tag: v2025.09-rc.6
      pullPolicy: IfNotPresent

  workloads:
    prefixUrl: workspaces

  backend:
    prefixUrl: airmapi
    image:
      repository: ghcr.io/silogen/airm-api
      tag: v2025.09-rc.6
      pullPolicy: IfNotPresent
    initContainers:
      initMigrationScripts:
        repository: ghcr.io/silogen/airm-api
        tag: v2025.09-rc.6
        pullPolicy: IfNotPresent
      liquibaseMigrate:
        repository: docker.io/liquibase/liquibase
        tag: 4.31
        pullPolicy: IfNotPresent
      chartsRegistration:
        repository: ghcr.io/silogen/airm-api
        tag: v2025.09-rc.6
        pullPolicy: IfNotPresent

    servicePort: 80
    servicePortMetrics: 9009
    env:
      dbPort: 5432
      rabbitmqPort: 5672
      minio_url: http://minio.minio-tenant-default.svc.cluster.local:80
      minio_bucket: default-bucket
      prometheus_url: http://lgtm-stack.otel-lgtm-stack.svc.cluster.local:9090

    resources:
      limits:
        memory: 1Gi
      requests:
        cpu: 500m
        memory: 1Gi
    securityContext:
      allowPrivilegeEscalation: false
      runAsNonRoot: true
      runAsUser: 1000
      seccompProfile:
        type: RuntimeDefault

apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: mutate-certificate-issuerref
spec:
  background: false
  rules:
  - name: mutate-issuerref-to-static-wildcard
    match:
      any:
      - resources:
          kinds:
          - Certificate
    exclude:
      any:
      - resources:
          namespaces:
          - airm
          - kaiwo
          - kube-system
          - kube-public
          - kube-node-lease
          - local-path-storage
          - kube-amd-gpu
          - opentelemetry-operator-system
    mutate:
      patchStrategicMerge:
        spec:
          issuerRef:
            name: static-wildcard-issuer
            kind: StaticCertIssuer
            group: certmanager.io
# Root key for MinIO Tenant Chart
tenant:
  name: default-minio-tenant
  configuration:
    name: default-minio-tenant-env-configuration
  configSecret: 
    name: example-minio-config-secret
    # accessKey: minio
    # secretKey: minio123
    # existingSecret: true
  pools:
    ###
    # The number of MinIO Tenant Pods / Servers in this pool.
    # For standalone mode, supply 1. For distributed mode, supply 4 or more.
    # Note that the operator does not support upgrading from standalone to distributed mode.
    - servers: 2
      ###
      # Custom name for the pool
      name: pool-0
      ###
      # The number of volumes attached per MinIO Tenant Pod / Server.
      volumesPerServer: 2
      ###
      # The capacity per volume requested per MinIO Tenant Pod.
      size: 10Gi
      ###
      # The `storageClass <https://kubernetes.io/docs/concepts/storage/storage-classes/>`__ to associate with volumes generated for this pool.
      #
      # If using Amazon Elastic Block Store (EBS) CSI driver
      # Please make sure to set xfs for "csi.storage.k8s.io/fstype" parameter under StorageClass.parameters.
      # Docs: https://github.com/kubernetes-sigs/aws-ebs-csi-driver/blob/master/docs/parameters.md
      # storageClassName: directpv-min-io
      nodeSelector: {}
        # processor-type: cpu
  buckets: 
    - name: default-bucket
  users:
    - name: default-user
extraResources:
 - |
    apiVersion: generators.external-secrets.io/v1alpha1
    kind: Password
    metadata:
      name: tenant-password
      namespace: minio-tenant-default
    spec:
      length: 24
      digits: 5
      symbols: 5
      symbolCharacters: "-_$@"
      noUpper: false
      allowRepeat: true
 - |
    apiVersion: external-secrets.io/v1beta1
    kind: ExternalSecret
    metadata:
      name: config-env
      namespace: minio-tenant-default
    spec:
      refreshInterval: "30m"
      target:
        name: default-minio-tenant-env-configuration
        template:
          data:
            config.env: |
                export MINIO_ROOT_USER="minioroot"
                export MINIO_ROOT_PASSWORD="{{"{{"}} .password {{"}}"}}"
      dataFrom:
      - sourceRef:
          generatorRef:
            apiVersion: generators.external-secrets.io/v1alpha1
            kind: Password
            name: "tenant-password"
 - |
    apiVersion: external-secrets.io/v1beta1
    kind: ExternalSecret
    metadata:
      name: default-user
      namespace: minio-tenant-default
    spec:
      refreshInterval: "30m"
      target:
        name: default-user
        template:
          data:
            CONSOLE_ACCESS_KEY: default-user
            CONSOLE_SECRET_KEY: "{{"{{"}} .password {{"}}"}}"
      dataFrom:
      - sourceRef:
          generatorRef:
            apiVersion: generators.external-secrets.io/v1alpha1
            kind: Password
            name: "tenant-password"